---
layout:     post                   
title:      Vueé¡¹ç›®æ›´æ¢ä¸»é¢˜è‰²å‰–æ   
subtitle:   çœ‹çœ‹å¦‚ä½•ä¼˜é›…çš„æ›´æ¢
date:       2018-01-08
author:     chuck
header-img: img/home-project-theme.jpg
catalog: true                      
tags:                               
    - Vue
    - é¡¹ç›®å®æˆ˜
---

æœ€è¿‘é¡¹ç›®ä¸­æœ‰æ›´æ¢ä¸»é¢˜çš„éœ€æ±‚ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¢è‚¤åŠŸèƒ½ã€‚é¡¹ç›®æ˜¯åŸºäº`element-ui(1.x)`å¼€å‘çš„ï¼Œäºæ˜¯å°±åœ¨å®˜ç½‘ä¸Šå¯»æ‰¾å®˜æ–¹çš„è§£å†³æ–¹æ¡ˆã€‚ä½†æ˜¯å®˜ç½‘çš„å®Œç¾è§£å†³æ–¹æ¡ˆæ˜¯åŸºäº2.0çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥åˆæ‰“ç®—æŠŠé¡¹ç›®ä¸­ç”¨åˆ°çš„`element-ui`å‡çº§åˆ°2.0ç‰ˆæœ¬ã€‚è¯ä¸å¤šè¯´ï¼Œå¼€æ’¸ã€‚

### ç¬¬ä¸€æ­¥ï¼Œå‡çº§element-ui

åœ¨åŸæœ‰çš„é¡¹ç›®ä¸­æ‰§è¡Œï¼š

```
npm i element-ui -S
```
ç­‰äº†è®¸ä¹…åï¼Œå‘ç°å‡çº§åˆ°äº†1.xçš„æœ€æ–°ç‰ˆï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿäºæ˜¯æˆ‘å°±æ¢äº†ä¸€ç§åŠæ³•ï¼Œç›´æ¥åœ¨`package.json`ä¸­å°†`element-ui`çš„ç‰ˆæœ¬æ”¹åˆ°æœ€æ–°`^2.0.11`ï¼Œå½“ç„¶è¿™æ˜¯æœ€ç²—æš´çš„åŠæ³•äº†ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥å‡çº§åˆ°æœ€æ–°ç‰ˆï¼š

```
npm install element-ui@latest
```
ç„¶åæŒ‰ç…§å®˜ç½‘çš„æ­¥éª¤ç»§ç»­å®‰è£…ã€Œä¸»é¢˜ç”Ÿæˆå·¥å…·ã€ï¼Œå»ºè®®å®‰è£…åœ¨é¡¹ç›®ä¸­ï¼š

```
npm i element-theme -g
```
ç„¶åå®‰è£…é»˜è®¤ä¸»é¢˜ï¼š

```
npm i element-theme-chalk -D
```
å®‰è£…å®Œæˆååˆå§‹åŒ–å˜é‡æ–‡ä»¶ï¼š

```
et -i

> âœ” Generator variables file // åˆå§‹åŒ–æˆåŠŸåæç¤ºè¿™ä¸ª
```
ç„¶åå†ç¼–è¯‘ä¸»é¢˜ï¼š

```
et

> âœ” build theme font
> âœ” build element theme // ç¼–è¯‘æˆåŠŸåæç¤ºè¿™ä¸¤è¡Œ
```
è¿™æ ·å°±å®Œç¾çš„å‡çº§åˆ°2.0ç‰ˆæœ¬äº†ã€‚

### ç¬¬äºŒæ­¥ï¼šå¼€å§‹æ¢è‚¤æ“ä½œ

è¿™é‡Œçš„æ–¹æ³•æ˜¯å‚è€ƒé¥¿äº†ä¹ˆå¤§ç¥[PanJiaChen](https://github.com/PanJiaChen)å¼€æºçš„é¡¹ç›®[vue-element-admin](https://github.com/PanJiaChen/vue-element-admin)é‡Œæåˆ°çš„æ–¹æ³•ã€‚

æ–¹æ³•çš„æ ¸å¿ƒå°±æ˜¯ä½¿ç”¨cssçš„å‘½åç©ºé—´æ¥æä¾›å¤šå¥—cssä¸»é¢˜ï¼Œæ¥è¾¾åˆ°æ¢è‚¤çš„ç›®çš„ã€‚æˆ‘ä»¬æ¥ç€æ’¸ï¼š

é¦–å…ˆå°†é¥¿äº†ä¹ˆå®˜æ–¹æä¾›çš„ä¸»é¢˜å·¥å…·`element-theme` check outåˆ°æœ¬åœ°ï¼š

```
git clone https://github.com/ElementUI/element-theme.git
```
ç„¶åæŒ‰ç…§æ­¥éª¤ä¾æ¬¡æ‰§è¡Œ:

```
npm i element-theme -D
npm i element-theme-chalk -D
```
çœ‹èµ·æ¥è·Ÿåˆšæ‰çš„å‡çº§æ“ä½œå·®ä¸å¤šå‘€ï¼Œæˆ‘ä»¬æ¥ç€åˆå§‹åŒ–ï¼š

```
et -i

> âœ” Generator variables file // åˆå§‹åŒ–æˆåŠŸåæç¤ºè¿™ä¸ª
```
è¿™ä¸ªæ—¶å€™ï¼Œä¼šå‡ºç°ä¸€ä¸ªæ–‡ä»¶å«åš`element-variables.scss`,è¯¥æ–‡ä»¶ç”¨äºå­˜æ”¾å˜é‡ï¼Œæˆ‘ä»¬éœ€è¦æ”¹åŠ¨çš„åœ°æ–¹å°±åœ¨è¯¥æ–‡ä»¶é‡Œã€‚

æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå°†ç¬¬17è¡Œçš„ä¸»é¢˜è‰²æ”¹ä¸ºä½ éœ€è¦çš„ï¼š

```
$--color-primary: #fd7a00 !default; //é¡¹ç›®çš„ä¸»é¢˜è‰²
```
ç„¶åæ‰§è¡Œï¼š

```
et

âœ” build element theme
âœ” build theme font // æ‰§è¡ŒæˆåŠŸåçš„æç¤º

```
æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°ä¸€æ¬¾å«åš`gulp-css-wrap`çš„æ’ä»¶æ¥ç»™cssæ–‡ä»¶æ·»åŠ å‘½åç©ºé—´ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨cloneä¸‹æ¥çš„é¡¹ç›®çš„`package.json`é‡Œæ·»åŠ ä¸¤ä¸ªä¾èµ–ï¼š

```
"gulp-clean-css": "^3.0.4",
"gulp-css-wrap": "^0.1.2",
```
å°±æ˜¯ğŸ‘‡çº¢æ¡†ä¸­çš„ä¾èµ–ï¼š
![](https://ws2.sinaimg.cn/large/006tNc79gy1fn9axdswx8j30vu0jgmxm.jpg)

ç„¶åï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ `gulpfile.js`åœ¨ä¸»é¢˜å·¥å…·é¡¹ç›®ä¸­ã€‚jsä»£ç å¦‚ä¸‹:

```
var path = require('path')
var gulp = require('gulp')
var cleanCSS = require('gulp-clean-css');
var cssWrap = require('gulp-css-wrap');

var customThemeName='.custom-fd7a00' // æ³¨æ„æ³¨æ„ï¼Œè¿™é‡Œå°±æ˜¯éœ€è¦æ·»åŠ çš„å‘½åç©ºé—´

gulp.task('css-wrap', function() {
  return gulp.src( path.resolve('./theme/index.css'))
    .pipe(cssWrap({selector:customThemeName}))
    .pipe(cleanCSS())
    .pipe(gulp.dest('dist'));
});

gulp.task('move-font', function() {
  return gulp.src(['./theme/fonts/**']).pipe(gulp.dest('dist/fonts'));
});

gulp.task('default',['css-wrap','move-font']);

```

ä¸éš¾çœ‹å‡ºï¼Œgulpæ–‡ä»¶çš„ç›®çš„æ˜¯é€šè¿‡æ’ä»¶å°†cssæ–‡ä»¶å…¨éƒ¨æ·»åŠ å‘½åç©ºé—´ï¼Œå¹¶ä¸”æ”¾åœ¨distæ–‡ä»¶å¤¹ä¸‹ã€‚å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±è¯¥ç”Ÿæˆæœ€ç»ˆçš„cssæ–‡ä»¶äº†ã€‚
å¾ˆç®€å•ï¼Œåœ¨ä¸»é¢˜å·¥å…·é¡¹ç›®çš„è·¯å¾„ä¸‹æ‰§è¡Œ:

```
gulp
```
å¦‚æœä¸è®¤è¯†è¯¥å‘½ä»¤ï¼Œé‚£ä¹ˆå°±éœ€è¦å…¨å±€å®‰è£…ä¸€ä¸‹gulpäº†ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š

```
$ npm install --global gulp
```
æ‰§è¡ŒæˆåŠŸçš„æˆªå›¾å¦‚ä¸‹ï¼š

![](https://ws4.sinaimg.cn/large/006tNc79gy1fn9b5g8v2wj30cs040aa0.jpg)

### ç¬¬ä¸‰æ­¥:å®é™…é¡¹ç›®å¼•ç”¨

ç„¶åæˆ‘ä»¬å°†ç”Ÿæˆçš„`index.css`æ”¾åˆ°æˆ‘ä»¬çš„å®é™…é¡¹ç›®ä¸­ï¼Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†ç”Ÿæˆçš„fontsæ–‡ä»¶å¤¹åŒæ—¶å¼•å…¥ï¼Œå¦åˆ™è¿è¡Œé¡¹ç›®æ—¶ï¼Œå°±ä¼šæŠ¥é”™ã€‚æˆ‘æ˜¯è¿™æ ·å¼•å…¥cssæ–‡ä»¶çš„ï¼Œå°†ä¸»é¢˜è‰²å‘½åä¸ºæ–‡ä»¶å¤¹ç”¨äºåŒºåˆ†ã€‚

![](https://ws2.sinaimg.cn/large/006tNc79gy1fn9b8n2yx0j309y09b746.jpg)

ç„¶ååœ¨`App.vue`é€šè¿‡`import`æ¥å¼•å…¥ä¸åŒçš„ä¸»é¢˜cssï¼Œç”±äºç›®å‰æ‰€éœ€ä¸»é¢˜è‰²ä¸å¤šï¼Œæ‰€ä»¥åšæ³•æ˜¯å…¨éƒ¨å¼•å…¥ï¼š

```
 @import './asserts/css/theme/00a597/index.css';
 @import './asserts/css/theme/fd7a00/index.css';
```
å¼•å…¥åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡radioæ¥è¿›è¡Œä¸»é¢˜åˆ‡æ¢ï¼Œä¸ºäº†è®°ä½ä¸»é¢˜ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†ä¸»é¢˜å­˜æ”¾åœ¨`localStorage`ä¸­ï¼Œä»¥ä¾¿åˆ·æ–°é¡µé¢è¯»å–ã€‚æ ¸å¿ƒæ–¹æ³•å°±æ˜¯é€šè¿‡radioçš„å€¼æ¥ç»™`body`èµ‹äºˆä¸åŒçš„`class`ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹:

```
<el-dialog title="æ›´æ¢ä¸»é¢˜" size="tiny" :visible.sync="dialogThemeVisible">
    <el-radio-group v-model="themeColor" @change="radioChange">
        <el-radio label="fd7a00">é»˜è®¤ä¸»é¢˜</el-radio>
        <el-radio label="00a597">è“ç»¿è‰²ä¸»é¢˜</el-radio>
    </el-radio-group>
</el-dialog>


toggleClass(element,className){
    if (!element || !className) return;
    element.className = className;
},
radioChange(value){
    this.toggleClass(document.body,'custom-' + value);
}
```

ä»¥ä¸Šï¼Œå°±æ˜¯æ›¿æ¢é¡¹ç›®çš®è‚¤çš„æ€è·¯ï¼Œä»…ä¾›å‚è€ƒã€‚




